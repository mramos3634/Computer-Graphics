<!DOCTYPE HTML>
<HTML lang="en">
	<HEAD>
		<META CHARSET="UTF-8">
		<TITLE>WEBGL INITIALS</TITLE>
		<script id="2dVertexShader" type = "notjs">
		attribute vec4 a_position;
		attribute vec3 a_color;
		varying vec3 v_color;
		void main()
		{
			v_color = a_color;
			gl_Position = a_position;
		}
		</script>

		<script id="2dFragmentShader" type="notjs">
		precision mediump float;
		varying vec3 v_color;
		void main()
		{
			gl_FragColor = vec4(v_color,1);
		}
		</script>
		
		<script>
		//WebGL Setup class
		class InitWebGLProgram {
			constructor() {
				gl.viewport(0,0,gl.canvas.width,gl.canvas.height);
				gl.clearColor(1,1,1,1);
			}
			createShader(type,source) {
				var shader = gl.createShader(type);
				gl.shaderSource(shader,source);
				gl.compileShader(shader);
				return shader;
			}

			createProgram(vs,fs) {
				var program = gl.createProgram();
				gl.attachShader(program,vs);
				gl.attachShader(program,fs);
				gl.linkProgram(program);
				return program;
			}
		}
		
		class LineShape {
			constructor(vertices, color, primitive) {

				var data = [];
				for(let i=0;i<vertices.length;i+=2){
					data.push(vertices[i], vertices[i+1]);
					data.push(color[0],color[1],color[2]);
				}

				this.count = vertices.length/2;
				this.primitive = primitive;

				this.buffer = gl.createBuffer();
				gl.bindBuffer(gl.ARRAY_BUFFER,this.buffer);
				gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(data),gl.STATIC_DRAW);
			}

			render(program){
				var posLoc = gl.getAttribLocation(program,"a_position");
				var colLoc = gl.getAttribLocation(program,"a_color");

				gl.bindBuffer(gl.ARRAY_BUFFER,this.buffer);

				gl.enableVertexAttribArray(posLoc);
				gl.vertexAttribPointer(posLoc,2,gl.FLOAT,false,5*4,0);

				gl.enableVertexAttribArray(colLoc);
				gl.vertexAttribPointer(colLoc,3,gl.FLOAT,false,5*4,2*4);

				gl.drawArrays(this.primitive,0,this.count);
			}
		}

		
		//main class
		class main{
			constructor(){
				this.webgl = new InitWebGLProgram();
				
				var vs = this.webgl.createShader(
					gl.VERTEX_SHADER,
					document.getElementById("2dVertexShader").text
				);
				
				var fs = this.webgl.createShader(
					gl.FRAGMENT_SHADER,
					document.getElementById("2dFragmentShader").text
				);
				
				this.program = this.webgl.createProgram(vs,fs);
				gl.useProgram(this.program);
				
				this.buildLetters();
				this.draw();
			}
			
			//rectangle made up from TRIANGLES
			rect(x1,y1,x2,y2){
				return [
					x1,y1, x2,y1, x2,y2,
					x1,y1, x2,y2, x1,y2
				];
			}
			
			buildLetters(){
				//letter M (red)
				let Mverts = [
					-0.9,-0.6,  -0.9,0.6,
					-0.9,0.6,   -0.75,-0.1,
					-0.75,-0.1, -0.6,0.6,
					-0.6,0.6,   -0.6,-0.6
				];

				this.Mshape = new LineShape(Mverts,[1,0,0],gl.LINES);
								
				
				let R1verts = [
					-0.2,-0.6,
					-0.2,0.6,
					0.0,0.6,
					0.1,0.5,
					0.1,0.3,
					0.0,0.2,
					-0.2,0.2
				];

				this.R1main = new LineShape(R1verts,[0,0.8,0],gl.LINE_STRIP);

				let R1leg = [
					-0.2,0.2,
					0.1,-0.6
				];

				this.R1leg = new LineShape(R1leg,[0,0.8,0],gl.LINES);
				
				//letter R (blue)
				let R2verts = [
					0.4,-0.6,
					0.4,0.6,
					0.6,0.6,
					0.7,0.5,
					0.7,0.3,
					0.6,0.2,
					0.4,0.2
				];

				this.R2main = new LineShape(R2verts,[0,0,1],gl.LINE_STRIP);

				let R2leg = [
					0.4,0.2,
					0.7,-0.6
				];

				this.R2leg = new LineShape(R2leg,[0,0,1],gl.LINES);

				
				
			}
			
			draw(){
				gl.clear(gl.COLOR_BUFFER_BIT);

				this.Mshape.render(this.program);

				this.R1main.render(this.program);
				this.R1leg.render(this.program);

				this.R2main.render(this.program);
				this.R2leg.render(this.program);
			}
		
		}
		
		//global
		
		var canvas;
		var gl;
		
		window.onload = function(){
			canvas = document.getElementById("myCanvas");
			gl = canvas.getContext("webgl");
			new main;
		}
		
		</script>
	</HEAD>
	<BODY>
		<canvas id="myCanvas" width="700" height="400"></canvas>
	</BODY>
</HTML>